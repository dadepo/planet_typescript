<html>
    <head>
        <script type="text/javascript">
        const voteUp = (id) => {
            fetch("http://localhost:4300/vote", 
            { method: 'POST', 
            headers: {'Content-Type': 'application/json'}, 
            body: JSON.stringify({id, value: 1})})
        }

        const voteDown = (id) => {
            fetch("http://localhost:4300/vote", 
            { method: 'POST', 
            headers: {'Content-Type': 'application/json'}, 
            body: JSON.stringify({id, value: -1})})
        }
        </script>
    </head>
    <body>
        <% if (links.length > 0) { %>
            <ul>
                <% for(var i=0; i < links.length; i++) { %>
                    <li>
                        <%= links[i].title %> Votes: <%= links[i].votes %> | 
                        <span id="<%= links[i].id %>" onclick="voteUp('<%= links[i].id %>')">up</span> | <span id="<%= links[i].id %>" onclick="voteDown('<%= links[i].id %>')">down</span><br/>
                        <%= links[i].source %> <br/>
                        <%= links[i].summary %> <br/>
                        <hr/>
                    </li>
                
                 <% } %>
                </ul>
          <% } else {%>
            No posts yet
        <% } %>
    </body>
</html>